
Контейнеризация — это технология, которая помогает запускать приложения изолированно от основной операционной системы. Программа упаковывается в специальную оболочку-контейнер, внутри которой — среда, необходимая для работы.

Контейнеры можно создавать, описывать и развертывать, то есть запускать на устройстве, закрывать и удалять, конфигурировать и настраивать, выделять им память и передавать данные от одного к другому. Все это — работа с контейнеризацией. Наиболее популярная реализация технологии — [Docker](https://blog.skillfactory.ru/glossary/docker/).

Технология нужна:

- для изолированного запуска приложений и рабочих сред вне зависимости от системы и ПО, установленных на конкретной машине;
- контроля ресурсов и снижения нагрузки на систему;
- разрешения конфликтов, которые могут возникнуть из-за того, что разные приложения нуждаются в различных версиях ПО или библиотек;
- быстрого перемещения настроенных приложений и сред с одной машины на другую;
- создания удобной рабочей инфраструктуры;
- ускорения процесса разработки и снижения риска ошибок;
- масштабирования готовых решений;
- легкого управления сложными приложениями, средами и системами.

## Как устроен контейнер

Ближайшая аналогия для контейнера — ящики с грузом, которые можно поставить где угодно. На их содержимое не влияют условия снаружи. Только внутри контейнера может запуститься и работать приложение. Оно будет исполняться изолированно от основной системы, не взаимодействуя с ней. Контейнер универсален: его можно развернуть в любой ОС независимо от настроек.

==Контейнеры создаются на основе образов, похожих на те, которые используются для установки ОС.== Но есть отличие: внутри находится не полноценная операционная система, а минималистичная среда с нужными настройками. Образ запускается в приложении для управления контейнерами, и из него разворачивается контейнер.

## Преимущества технологии контейнеризации

Контейнеризация дает ряд преимуществ при работе с приложениями и построении инфраструктуры. Поэтому сейчас ее используют практически во всех сегментах IT.

**Запуск сред без конфликтов.** Без контейнеризации приложения пришлось бы запускать поверх основной ОС. Если в операционной системе одна версия библиотек и программного обеспечения, а приложению нужна другая, возник бы конфликт. В контейнер можно положить все нужные зависимости, включая библиотеки: конфликтов не возникнет.

**Контроль ресурсов.** Продвинутые системы работы с контейнерами умеют распределять между ними мощности, задавать приоритеты, запускать и останавливать, устанавливать связи. Если грамотно настроить системы, можно оптимизировать потребление мощностей. Даже большие приложения будут потреблять меньше памяти. Также если на отдельные приложения повысится нагрузка, системы управления смогут выделить им больше ресурсов за счет других контейнеров. Производительность останется высокой.

**Поддержка безопасности.** Один из плюсов изоляции — повышение безопасности и снижение риска утечки. Если приложение внутри контейнера выдаст критическую ошибку, окажется скомпрометировано или начнет вести себя вредоносно, это не нарушит работу других программ. Небезопасный код окажется изолирован от других участков системы.

**Создание рабочей инфраструктуры.** Для разработки нужна определенная среда. Без контейнеров ее пришлось бы настраивать вручную для каждой задачи и пользователя. Это занимает много времени. А если среды будут различаться для разных людей, это небезопасно. ==Поэтому одно из применений контейнеров — создание рабочей инфраструктуры, единой для всех разработчиков.==

**Оптимизация расходов.** Контейнеры экономят не только ресурсы компьютеров, но и денежные средства.

- Не нужно использовать «тяжеловесные» решения. Это дешевле.
- Изоляция приложений снижает риск непредвиденной ошибки или фатального сбоя, поэтому помогает избежать лишних расходов.

**Построение архитектуры.** Популярная архитектура приложений — микросервисная. Большое приложение рассматривают как набор маленьких независимых друг от друга сервисов. И для такого архитектурного решения идеально подходит контейнеризация: каждый сервис упаковывается в свой контейнер. Они передают друг другу данные, но работают независимо. Управляет ими обычно оркестратор или ПО для многоконтейнерных приложений — это зависит от размера системы.

## Особенности технологии контейнеризации

### Изолированный запуск

Внутри контейнера — изолированная среда. В ней могут находиться файлы, библиотеки, установленные приложения со всеми зависимостями и настройками. Даже если настройки и зависимости противоречат имеющимся в основной ОС, ничего страшного. Конфликты не возникнут, так как контейнер изолирует свое содержимое от внешней системы.

### Независимость друг от друга

Один контейнер не зависит от другого. Если внутри контейнера A что-то сломается, это не повлияет на работу контейнера B. Они могут общаться друг с другом, передавать данные, но будут работать независимо друг от друга.

### Использование ресурсов ОС

Контейнер работает на основе операционной системы. Чаще всего это [Linux](https://blog.skillfactory.ru/glossary/linux/), потому что популярные решения для контейнеризации разработаны для нее. Контейнер берет ресурсы из операционной системы, для изоляции использует ее технологии. Поэтому контейнер, созданный для запуска в Linux, не будет работать в Windows — там используется другая архитектура.

### Легковесность

Контейнер — относительно легкая структура. Она занимает столько ресурсов, сколько нужно приложению внутри.

### «Одноразовость»

Один экземпляр контейнера — сущность, которая имеет короткий срок жизни. Когда контейнер закрывается, вся информация внутри него стирается. Это похоже на закрытие файла без сохранения. Поэтому при работе с контейнерами важные данные выводят наружу, во внешнюю операционную систему.

А если закрытый контейнер понадобится снова, можно создать другой его экземпляр из того же образа. Так обычно и делают.

## Чем контейнеризация отличается от виртуализации

Похожее с первого взгляда понятие — виртуализация, создание виртуальной копии другой ОС на том же компьютере. Технологии различаются между собой.

**Виртуальная машина (ВМ)** **— абстракция на уровне физического оборудования, превращает один сервер в несколько.**

На каждой ВМ отдельная гостевая ОС работает поверх ОС хоста с виртуализированным доступом к базовому оборудованию.

Виртуальные машины с различными операционными системами могут работать на одном физическом сервере: ВМ UNIX может работать вместе с ВМ Linux и пр. Система виртуализации и микроядро, создающие и запускающие виртуальные машины, называются мониторами ВМ или гипервизорами. Они находятся между оборудованием и ВМ и необходимы для изоляции ОС друг от друга и виртуализации сервера.

**Контейнер — абстракция на уровне приложения, объединяет зависимости и код.**

Контейнеры устанавливаются на физический сервер и его ОС, например Windows или Linux. Они отделяют содержимое от операционной системы. Контейнеры легче, быстрее разворачиваются, требуют меньше оперативной памяти и мощностей, а также более гибкие. Расход ресурсов меньше, быстродействие выше.

Виртуальные машины запускают любое ядро операционной системы независимо от основной ОС. Контейнер должен быть совместим с ядром операционной системы сервера.

## Многоконтейнерные приложения

Существует практика: одно приложение — один контейнер. Это нужно для более хорошей изоляции, для удобства и безопасности. Так две программы не смогут конфликтовать или мешать работе друг друга. А если ошибка обнаружится в одном приложении, она не заденет другие.

Большие системы, которые состоят из множества элементов, требуют не один, а несколько контейнеров. Они называются многоконтейнерными приложениями. Для управления такими системами нужно специальное ПО. Оно позволяет управлять контейнерами «в связке», а не поодиночке, ускоряет и упрощает работу. Это, например, Docker Compose.

## Что такое оркестраторы

Когда контейнеров десятки или сотни, возможностей ПО вроде Docker Compose не хватает. В этих случаях используются оркестраторы, или системы оркестрации, — программное обеспечение, которое само управляет множественными контейнерами.

С оркестраторами контейнеры не надо настраивать и конфигурировать вручную. ПО контролирует их работоспособность, включает и отключает, выделяет ресурсы и занимается построением сети. Оркестраторы оптимизируют память, могут запустить одну контейнерную систему на нескольких серверах одновременно и автоматизируют управление ею. Такая программа становится посредником, через которого специалист взаимодействует с инфраструктурой.

«Золотой стандарт» среди оркестраторов — платформа [Kubernetes](https://blog.skillfactory.ru/glossary/kubernetes/).