
`git sparse-checkout` — чуть более сложную фичу, добавленную в Git 2.25, которая была выпущена 13 января 2020 года.

Допустим, у вас есть большой монорепозиторий, в котором микросервисы разбиты на отдельные папки; команды наподобие `checkout` и `status` из-за размера репозитория выполняются крайне медленно, но, возможно, вам на самом деле достаточно работать с одним поддеревом/папкой. Тогда на помощь придёт `git sparse-checkout`:

```shell

$ git clone --no-checkout https://github.com/derrickstolee/sparse-checkout-example
$ cd sparse-checkout-example
$ git sparse-checkout init --cone  # Конфигурируем git, чтобы он подбирал файлы только в корневой папке
$ git checkout main  # Checkout только файлов в корневой папке
$ ls
bootstrap.sh  LICENSE.md  README.md
$ git sparse-checkout set service/common
$ ls
bootstrap.sh  LICENSE.md  README.md  service
$ tree .
.
├── bootstrap.sh
├── LICENSE.md
├── README.md
└── service
├── common
│   ├── app.js
│   ├── Dockerfile

```

В приведённом выше примере мы сначала клонируем репозиторий без проверки всех файлов. Затем используем `git sparse-checkout init --cone` , чтобы сконфигурировать `git` так, чтобы он подбирал файлы только в корне репозитория. После выполнения checkout у нас будет только три файла, а не всё дерево. Чтобы затем скачать/выполнить checkout конкретной папки, мы используем `git sparse-checkout set ...`.

Как уже говорилось, это может быть очень удобно при локальной работе с огромными репозиториями, но столь же полезно в CI/CD для повышения скорости работы конвейера, когда нам нужно только собрать/развернуть часть монорепозитория и нет необходимости проверять всё.

Подробное описание `sparse-checkout` представлено в [статье](https://github.blog/2020-01-17-bring-your-monorepo-down-to-size-with-sparse-checkout/).