
# Корутины  (coroutine)

Корутина (coroutine или Сопрограмма) — результат вызова асинхронной функции, представляющий собой _выполнение_ этой функции, способное приостанавливаться, это в свою очередь разновидность генератора. Корутина дает интерпретатору возможность возобновить базовую функцию, которая была приостановлена в месте размещения ключевого слова `await`. Корутина — это то, что **возвращает** функция с `await`, то есть f(4) - корутина, а f - асинхронная (или корутинная) функция


# Футуры (Future)

Футура (Future) - будущий результат выполнения сопрограммы. Метод `ensure_future` поручает циклу событий выполнить сопрограмму и сразу же, в момент вызова, возвращает футуру, в которой будет значение, но неизвестно когда. Вызывающая сторона может подождать выполнения футуры так же, как ожидало саму сопрограмму.

До Python 3.7 не было `asyncio.create_task()`. И для передачи в цикл событий на выполнение асинхронной функции использовали Футуры `loop.ensure_future()

```python

async def callee():
    return 'Hello'

async def caller():
    loop = asyncio.get_event_loop()
    future = loop.ensure_future(callee())
    result = await future
    print(result + ' World')

```

Класс [Task](https://docs.python.org/3/library/asyncio-task.html#asyncio.Task) - это наследник класса [Future](https://docs.python.org/3/library/asyncio-future.html#asyncio.Future).


# Задачи или Таски (Tasks)

Задачи — это основная сущность для асинхронных программ после Python 3.7. Они служат для "оборачивания" корутин и последующей передачи их в цикл событий. Задачи планируют независимое выполнение корутин в цикле событий. В результате, в некий момент времени, запланированная задача выполняется. В процессе её выполнения она может быть приостановлена, например — при ожидании выполнения другой корутины или задачи. Её работа может завершиться нормально и возвратить результат. Возможно и такое, что её работа завершится неудачно, с выдачей исключения.

Какая-нибудь корутина может вмешаться в работу задачи и отменить её выполнение.

В любом случае — задача будет завершена и её нельзя будет запустить снова.

Жизненный цикл задачи можно представить себе так:

1. Создана (Created).
    
2. Запланирована (Scheduled).
    
3. Выполняется (Running).
    
4. Завершена (Done).


